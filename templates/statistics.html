{% extends "base.html" %}

{% block title %}Thống kê Hệ thống - Hệ thống Liên lạc{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Thống kê Hệ thống</h2>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary btn-sm">Quay lại Dashboard</a>
</div>

{% if role in ['giaovien', 'truong'] %}
    <div class="row">
        <div class="col-md-6 col-lg-4 mb-3">
            <div class="card text-white bg-info">
                <div class="card-body">
                    <h5 class="card-title">Học sinh</h5>
                    <p class="card-text display-4">{{ stats.num_students }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-3">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h5 class="card-title">Giáo viên</h5>
                    <p class="card-text display-4">{{ stats.num_teachers }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-3">
            <div class="card text-dark bg-warning">
                <div class="card-body">
                    <h5 class="card-title">Đơn từ chờ xử lý</h5>
                    <p class="card-text display-4">{{ stats.num_requests_pending }}</p>
                </div>
            </div>
        </div>
         <div class="col-md-6 col-lg-4 mb-3">
            <div class="card text-white bg-secondary">
                <div class="card-body">
                    <h5 class="card-title">Sự kiện/Thông báo</h5>
                    <p class="card-text display-4">{{ stats.num_events_announcements }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-3">
            <div class="card text-white bg-primary">
                <div class="card-body">
                    <h5 class="card-title">Lượt Khen thưởng</h5>
                    <p class="card-text display-4">{{ stats.rewards_count }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-4 mb-3">
            <div class="card text-white bg-danger">
                <div class="card-body">
                    <h5 class="card-title">Lượt Kỷ luật</h5>
                    <p class="card-text display-4">{{ stats.discipline_count }}</p>
                </div>
            </div>
        </div>
    </div>

    <hr class="my-4">

    <h4>Học tập (Ví dụ):</h4>
    <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Điểm trung bình môn Toán (toàn trường):
            <span class="badge badge-primary badge-pill" style="font-size: 1rem;">{{ stats.avg_math_score }}</span>
        </li>
        </ul>

{% else %}
    <div class="alert alert-warning">Bạn không có quyền xem trang này.</div>
{% endif %}

{% endblock %}